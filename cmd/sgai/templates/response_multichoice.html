<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="color-scheme" content="light">
	<title>Response Required - sgai</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
	<style>
		.choices-container {
			margin-bottom: 1rem;
		}
		.choice-item {
			display: flex;
			align-items: flex-start;
			gap: 0.5rem;
			margin-bottom: 0.75rem;
		}
		.choice-item input[type="checkbox"],
		.choice-item input[type="radio"] {
			margin-top: 0.25rem;
			flex-shrink: 0;
		}
		.choice-item label {
			margin: 0;
			cursor: pointer;
		}
		.other-section {
			margin-top: 1.5rem;
			padding-top: 1rem;
		}
		.other-section label {
			font-weight: 600;
		}
		.question-text {
			white-space: pre-wrap;
			margin-bottom: 1.5rem;
		}
		.choice-label-text {
			overflow: hidden;
			text-overflow: ellipsis;
			display: block;
			max-width: 100%;
		}
		.question-block {
			margin-bottom: 2rem;
			padding-bottom: 1.5rem;
			border-bottom: 1px solid var(--pico-muted-border-color);
		}
		.question-block:last-child {
			border-bottom: none;
			margin-bottom: 0;
		}
		.question-number {
			font-size: 0.875rem;
			color: var(--pico-muted-color);
			margin-bottom: 0.5rem;
		}
	</style>
</head>
<body id="responseMultichoicePage">
	<main class="container">
		<article>
			<header>
				<nav>
					<ul><li><a href="{{.ReturnTo}}">‚Üê Back</a></li></ul>
					<ul><li><strong>Response Required</strong></li></ul>
				</nav>
			</header>
			<p><mark>Agent: {{.AgentName}}</mark></p>
			<form method="POST" action="/respond">
				<input type="hidden" name="directory" value="{{.Directory}}">
				<input type="hidden" name="returnTo" value="{{.ReturnTo}}">
				<input type="hidden" name="multichoice" value="true">
				<input type="hidden" name="questionCount" value="{{len .Questions}}">

				{{range $qIndex, $question := .Questions}}
				<div class="question-block">
					{{if gt (len $.Questions) 1}}
					<div class="question-number">Question {{add $qIndex 1}} of {{len $.Questions}}</div>
					{{end}}
					<div class="question-text">{{$question.Question}}</div>
					<input type="hidden" name="multiSelect_{{$qIndex}}" value="{{$question.MultiSelect}}">

					<fieldset class="choices-container">
						<legend>Select your answer{{if $question.MultiSelect}}(s){{end}}:</legend>
						{{range $cIndex, $choice := $question.Choices}}
						<div class="choice-item">
							{{if $question.MultiSelect}}
							<input type="checkbox" id="choice-{{$qIndex}}-{{$cIndex}}" name="choices_{{$qIndex}}" value="{{$choice}}">
							{{else}}
							<input type="radio" id="choice-{{$qIndex}}-{{$cIndex}}" name="choices_{{$qIndex}}" value="{{$choice}}">
							{{end}}
							<label for="choice-{{$qIndex}}-{{$cIndex}}" data-tooltip="{{$choice}}">
								<span class="choice-label-text">{{$choice}}</span>
							</label>
						</div>
						{{end}}
					</fieldset>
				</div>
				{{end}}

				<div class="other-section">
					<label for="other">Other (additional comments or alternative answer):</label>
					<textarea name="other" id="other" placeholder="Type your custom response here..." rows="3"></textarea>
				</div>

				<button type="submit">Send Response</button>
			</form>
			{{template "response_context.html" .}}
		</article>
	</main>
</body>
</html>
